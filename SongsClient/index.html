<!DOCTYPE html>
<html lang="en">

<head>
  <title>SongsHive</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="HTML5 website template">
  <meta name="keywords" content="global, template, html, sass, jquery">
  <meta name="author" content="Bucky Maler">
  <link rel="icon" href="./assets/img/logo.png">
  <link rel="stylesheet" href="assets/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"
    integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous">
    </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="./assets/js/ajaxCalls.js"></script>
  <script>
    const baseApi = 'https://localhost:7091/api/Users'
    $(document).ready(() => {

      ////////////////////////login and register///////////////////
      let updateLoginPage = (page) => {
        $("#mainFormDiv").html("");
        if (page === "logout") {//logout page
          $("#mainFormDiv").append('<h2 id="formHeader" >Are you sure you want to logout?</h2><button id="logoutBtn" class="btnbtn">Log Out</button>');
          $("#logoutBtn").click(() => {
            localStorage.removeItem("user");
            Swal.fire({
              icon: 'success',
              text: "You Logged Out!",
              color: 'white',
              background: '#080808'
            })
            updateLoginBtns();
            window.location.href = "./index.html";
          })
        }
        else if (page === "login") { //login page
          $("#mainFormDiv").append('<h2 id="formHeader">Log in to enjoy your music</h2><form id="loginForm" class="work-request"><div id="formDiv" class="work-request--information"><div class="information-email"><input id="logEmailInp" type="email" spellcheck="false" title="example12@example.exapmle" required><label for="email">Email</label></div><div class="information-name"><input id="logPassInp" type="text" spellcheck="false" title="password must has a minimum of 6 characters, at least 1 uppercase letter, 1 lowercase letter, and 1 number, with no spaces." required><label for="password">password</label></div></div><input type="submit" value="Log In"></form>');
          $('#regEmailInp').attr('pattern', "^((?!\\.)[\\w-_.]*[^.])(@\\w+)(\\.\\w+(\\.\\w+)?[^.\\W])$");
          $('#regPassInp').attr('pattern', "^((?=\\S*?[A-Z])(?=\\S*?[a-z])(?=\\S*?[0-9]).{5,})\\S$");
          $('#loginForm').submit(function () {
            let email = $("#logEmailInp").val();
            let password = $("#logPassInp").val();
            User = {
              id: 0,
              name: "string",
              email: email,
              password: password,
              regDate: "2023-06-10T12:33:08.383Z"
            }
            ajaxCall("POST", baseApi + "/login", JSON.stringify(User), successCBLogin, errorCBLogin);
            return false;
          })
        }
        else { //signup page
          $("#mainFormDiv").append('<h2 id="formHeader">Sign up to enjoy new music</h2><form id="signUpForm" class="work-request"><div id="formDiv" class="work-request--information"><div class="information-name"><input id="regNameInp" type="text" spellcheck="false" title="name must include only letters" required ><label for="name">Name</label></div><div class="information-email"><input id="regEmailInp" type="email" spellcheck="false" title="example12@example.exapmle" required ><label for="email">Email</label></div><div class="information-name"><input id="regPassInp" type="text" spellcheck="false" title="password should has a minimum of 6 characters, at least 1 uppercase letter, 1 lowercase letter, and 1 number, with no spaces." required><label for="password">Password</label></div></div><input type="submit" value="Sign Up"></form>');
          $('#regNameInp').attr('pattern', '[a-zA-Z]+');
          $('#regEmailInp').attr('pattern', "^((?!\\.)[\\w-_.]*[^.])(@\\w+)(\\.\\w+(\\.\\w+)?[^.\\W])$");
          $('#regPassInp').attr('pattern', "^((?=\\S*?[A-Z])(?=\\S*?[a-z])(?=\\S*?[0-9]).{5,})\\S$");
          $('#signUpForm').submit(function () {
            let email = $("#regEmailInp").val();
            let password = $("#regPassInp").val();
            let name = $("#regNameInp").val();
            let currentDateTime = new Date();
            let formattedDateTime = currentDateTime.toISOString();
            User = {
              id: 0,
              name: name,
              email: email,
              password: password,
              regDate: formattedDateTime
            }
            ajaxCall("POST", baseApi + "/register", JSON.stringify(User), successCBSignUp, errorCBLogin);
            return false;
          })
        }
      }

      let updateLoginBtns = () => {
        if (localStorage["user"] != undefined) { //user logged in
          $(".header--cta").html("Hello " + JSON.parse(localStorage["user"]).name);
          $("#loginLink").html('LOGOUT <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118" style="enable-background:new 0 0 150 118;" xml:space="preserve"><g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)"><path d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z" /></g></svg><span class="btn-background"></span>');
          $('#notMember').hide();
          $('#signUpLink').hide();
          $('.side-nav li:nth-child(6)').addClass('logout');
          $("#outBarLogin").html("Logout");
          updateLoginPage("logout");
        }
        else { //guest
          $(".header--cta").html("Hello Guest");
          $("#loginLink").html('Login <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118" style="enable-background:new 0 0 150 118;" xml:space="preserve"><g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)"><path d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z" /></g></svg><span class="btn-background"></span>');
          $('#notMember').show();
          $('#signUpLink').show();
          $('.side-nav li:nth-child(6)').removeClass('logout');
          $("#outBarLogin").html("Login");
          updateLoginPage("login");
        }
      }

      updateLoginBtns();
      updateLoginPage("login");

      $('#signUpLink').click(function () {
        updateLoginPage("signup");
      });

      $('#loginLi').click(function () {
        if (localStorage["user"] != undefined) { //user logged in
          updateLoginPage("logout");
        }
        else {
          updateLoginPage("login");
        }
      });

      $('#loginLink').click(function () {
        if (localStorage["user"] != undefined) { //user want to logOut
          localStorage.removeItem("user");
          Swal.fire({
            icon: 'success',
            text: "You Logged Out!",
            color: 'white',
            background: '#080808'
          })
          updateLoginBtns();
          window.location.href = "./index.html";
        }
        else { //user want to login
          updateLoginPage("login");
        }
      });

      function successCBLogin(data) {
        Swal.fire({
          icon: 'success',
          text: "You Logged In Successfully!",
          color: 'white',
          background: '#080808'
        })
        localStorage["user"] = JSON.stringify(data);
        window.location.href = "./index.html";
        updateLoginBtns();
      }

      function successCBSignUp(data) {
        Swal.fire({
          icon: 'success',
          text: "You Signed Up Successfully!",
          color: 'white',
          background: '#080808'
        })
        localStorage["user"] = JSON.stringify(data);
        window.location.href = "./index.html";
        updateLoginBtns();
      }
      function errorCBLogin(error) {
        let message = error.responseText;
        Swal.fire({
          icon: 'error',
          text: message,
          color: 'white',
          background: '#080808',
        })
      }
    })

    ////////////////////////Favorites Songs///////////////////

    let renderFavorites = () => {
      if (localStorage["user"] !== undefined) {
        let userId = JSON.parse(localStorage["user"]).id;
        ajaxCall("GET", `${baseApi}/${userId}/songs`, "", successCBFavorites, errorCBFavorites);
      }
      else {
        console.log("no login")
        $("#favoriteSongs").html("<h3>You should login first to see your favorite songs</h3>");
      }
    }

    function successCBFavorites(data) {
      console.log(data);
      if (data.length === 0) {
        $("#favoriteSongs").html("<h3>You don't have favorite songs</h3>");
      }
      else {
        let favoritesDiv = $("#favoriteSongs");
        favoritesDiv.html("");
        for (let song of data) {
          let songDiv = `<a id="${song.id}" class="favSong" title="Click the heart to remove song from favorite">
  <h3 class="favTitle" style="display: inline-block;">${song.name}</h3>
  <p class="favP">${song.artistName}</p>
  <br>
  <i id="heart" class="fa fa-heart-o" id="randHeart1" style="font-size: 16px; color: red;"></i>
</a>
`;
          favoritesDiv.append(songDiv);
        }
      }
    }

    $(document).on("click", "#heart", function () {
      let userId = JSON.parse(localStorage["user"]).id;
      let songId = $(this).closest(".favSong").attr("id");
      ajaxCall("DELETE", baseApi + "/" + userId + "/" + songId, "", successCBRemoveFromFavorite, errorCBFavorites);
    });

    function successCBRemoveFromFavorite(data) {
      if (data === true) {
        Swal.fire({
          icon: 'success',
          text: "Song removed from your Favorites",
          color: 'white',
          background: '#080808'
        })
        renderFavorites();
      }
    }

    function errorCBFavorites(error) {
      let message = error.responseText;
      Swal.fire({
        icon: 'error',
        text: message,
        color: 'white',
        background: '#080808'
      })
    }
  </script>

</head>

<body>

  <!-- notification for small viewports and landscape oriented smartphones -->
  <div class="device-notification">
    <a class="device-notification--logo" href="#0">
      <img src="assets/img/logo.png" alt="Global">
      <p>SONGS</p>
    </a>
    <p class="device-notification--message">Global has so much to offer that we must request you orient your device to
      portrait or find a larger screen. You won't be disappointed.</p>
  </div>
  <div class="perspective effect-rotate-left">
    <div class="container">
      <div class="outer-nav--return"></div>
      <div id="viewport" class="l-viewport">
        <div class="l-wrapper">
          <header class="header">
            <a class="header--logo" href="./index.html">
              <img src="assets/img/logo.png" alt="Global">
              <p>SongsHive</p>
            </a>
            <button class="header--cta cta">Hello Ofek</button>
            <div class="header--nav-toggle">
              <span></span>
            </div>
          </header>
          <nav class="l-side-nav">
            <ul class="side-nav">
              <li id="HomeLi" class="is-active"><span>Home</span></li>
              <li><span>Songs</span></li>
              <li onclick="renderFavorites()"><span>Favorites</span></li>
              <li><span>Artists</span></li>
              <li><span>Quiz</span></li>
              <li id="loginLi"></li>
            </ul>
          </nav>
          <ul class="l-main-content main-content">
            <li class="l-section section section--is-active">
              <div class="intro">
                <div class="intro--banner">
                  <h1>Your next<br>interactive<br>experience</h1>
                  <button id="loginLink" class="cta">Login
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118"
                      style="enable-background:new 0 0 150 118;" xml:space="preserve">
                      <g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)">
                        <path
                          d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z" />
                      </g>
                    </svg>
                    <span class="btn-background"></span>
                  </button>
                  <br>
                  <span id="notMember">Not a Member? </span><button id="signUpLink" class="cta notMember"><u>Sign Up
                      Now</u></button>
                  <img src="assets/img/mainImage.png" alt="Welcome">
                </div>
                <div class="intro--options">
                  <a class="randSongs">
                    <h3 class="randTitle" style="display: inline-block;"></h3>
                    <p class="randPara"></p>
                    <br>
                    <i class="fa fa-heart-o " style="font-size:16px;"></i>
                  </a>
                  <a class="randSongs">
                    <h3 class="randTitle"></h3>
                    <p class="randPara"></p>
                    <br>
                    <i class="fa fa-heart-o " style="font-size:16px;"></i>
                  </a>
                  <a class="randSongs">
                    <h3 class="randTitle"></h3>
                    <p class="randPara"></p>
                    <br>
                    <i class="fa fa-heart-o" style="font-size:16px;"></i>
                  </a>
                </div>
              </div>
            </li>
            <li class="l-section section">
              <div class="work" id="search">
                <h2>Search Songs</h2>
                <form id="searchForm" class="work-request">
                  <div class="work-request--options">
                    <span class="options-a">
                      <input id="opt-1" type="checkbox" checked name="song-option" value="songName">
                      <label for="opt-1">
                        Song Name
                      </label>
                      <input id="opt-2" type="checkbox" name="song-option" value="artist">
                      <label for="opt-2">
                        Artist
                      </label>
                      <input id="opt-3" type="checkbox" name="song-option" value="lyrics">
                      <label for="opt-3">
                        Song Lyrics
                      </label>
                      <input id="opt-4" class="allSongs" type="checkbox" name="song-option" value="allSongs">
                      <label for="opt-4">
                        All Songs
                      </label>
                    </span>
                    </span>
                  </div>
                  <div class="work-request--information">
                    <div class="information-email">
                      <input type="text" id="searchInput" spellcheck="false">
                      <label for="text">search</label>
                    </div>
                    <input type="submit" id="searchBtn" value="Search">
                  </div>
                </form>
                <!-- <button onclick="runSpeechRecog()" style="background-color: black;">Sing</button>
                <button onclick="authenticate().then(loadClient)">authorize and load</button>
<button onclick="execute()">execute</button> -->
              </div>
              <div class="work" id="songs">
            </li>
            <li class="l-section section">
              <div class="about">
                <div class="about--banner">
                  <h2>Your Favorite Songs</h2>
                  <img src="assets/img/about-visual.png" alt="About Us">
                </div>
                <div id="favoriteSongsContainer">
                  <div id="favoriteSongs"></div>
                </div>
              </div>
            </li>
            <li class="l-section section">
              <div class="contact">
                <div class="contact--lockup">
                  <div class="modal">
                    <div class="modal--information">
                      <p>Pawia 5, 31-154 Kraków, Poland</p>
                      <a href="mailto:ouremail@gmail.com">ouremail@gmail.com</a>
                      <a href="tel:+148126287560">+48 12 628 75 60</a>
                    </div>
                    <ul class="modal--options">
                      <li><a href="#0">Bēhance</a></li>
                      <li><a href="#0">dribbble</a></li>
                      <li><a href="mailto:ouremail@gmail.com">Contact Us</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>
            <li class="l-section section">
              <div class="contact">
                <div class="contact--lockup">
                  <div class="modal">
                    <div class="modal--information">
                      <p>Pawia 5, 31-154 Kraków, Poland</p>
                      <a href="mailto:ouremail@gmail.com">ouremail@gmail.com</a>
                      <a href="tel:+148126287560">+48 12 628 75 60</a>
                    </div>
                    <ul class="modal--options">
                      <li><a href="#0">Bēhance</a></li>
                      <li><a href="#0">dribbble</a></li>
                      <li><a href="mailto:ouremail@gmail.com">Contact Us</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </li>
            <li class="l-section section">
              <div id="mainFormDiv" class="hire">
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <ul class="outer-nav">
      <li class="is-active">Home</li>
      <li>Songs</li>
      <li onclick="renderFavorites()">Favorites</li>
      <li>Artists</li>
      <li>Quiz</li>
      <li id="outBarLogin">Login</li>
    </ul>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery-2.2.4.min.js"><\/script>')</script>
  <script src="assets/js/functions-min.js"></script>
  <script>
    const baseApiOfek = 'https://localhost:7091/api'
    $(document).ready(() => {
      ajaxCall("GET", baseApiOfek + `/Songs/randomSong`, "", successCBRandom, errorCB);

      const checkboxes = document.querySelectorAll('input[type="checkbox"][name="song-option"]');

      // Add event listener to each checkbox
      checkboxes.forEach(function (checkbox) {
        checkbox.addEventListener('change', function () {
          // Uncheck all checkboxes except the current one
          checkboxes.forEach(function (cb) {
            if (cb !== checkbox) {
              cb.checked = false;
            }
          });
        });
      });
      $(".allSongs").on("click", function () {
        ajaxCall("GET", baseApiOfek + `/Songs`, "", successCBSong, errorCB);
      })
      $("#searchForm").submit(() => {
        const checkedValue = document.querySelector('input[name="song-option"]:checked').value;
        let serachApi;
        let userInput = $('#searchInput').val();
        switch (checkedValue) {
          case "songName":
            serachApi = baseApiOfek + `/Songs/${userInput}/info`
            break;
          case "artist":
            serachApi = baseApiOfek + `/Artists/${userInput}/songs`
            break;
          case "lyrics":
            serachApi = baseApiOfek + `/Songs/songBylyrics?lyrics=${userInput}`
            break;
          case "allSongs":
            serachApi = baseApiOfek + `/Songs`
            break;
          default: return false;
        }
        ajaxCall("GET", serachApi, "", successCBSong, errorCB);
        return false;
      })

      $(".randSongs").on("click", function () {
        if (localStorage.user === undefined) {
          Swal.fire({
            icon: 'error',
            text: "Please Log in to add song to Favorites",
            color: 'white',
            background: '#080808'
          })
          return;
        }
        this.querySelector(".fa-heart-o").style.color = "red"
        ajaxCall("POST", baseApiOfek + `/Users/${JSON.parse(localStorage.user).id}/${this.id}`, "", successCBAddToFavorite, errorCB);
      })

    })
    function successCBAddToFavorite() {
      Swal.fire({
        icon: 'success',
        text: "Song added to your Favorites",
        color: 'white',
        background: '#080808'
      })
    }
    runSpeechRecog = () => {
      var output = $("#searchInput");
      let recognization = new webkitSpeechRecognition();
      recognization.onstart = () => {
        output.innerHTML = "Listening...";
      }
      recognization.onresult = (e) => {
        var transcript = e.results[0][0].transcript;
        output.val(transcript);
        console.log(transcript)
      }
      recognization.start();
    }

    function successCBSong(data) {
      console.log(data)
      $("#songs").html("")
      console.log(data.length)
      if (data.length === undefined) {
        $("#songs").append(`<h2>Results:</h2>
                  <div class="work--lockup">
                    <ul class="slider">
                      <li class="slider--item slider--item-center">
                        <a href="#0">
                          <div class="slider--item-image">
                            <img src="assets/img/work-metiew-smith.jpg" alt="Metiew and Smith">
                          </div>
                          <p class="slider--item-title">${data.name}</p>
                          <p class="slider--item-description">${data.artistName}</p>
                        </a>
                      </li>
                    </ul>
                  </div>`)
      }
      else {
        let restOfSongs = "";
        restOfSongs += `<h2>Results:</h2>
           <div class="work--lockup">
            <ul class="slider">
            <li class="slider--item slider--item-left">
            <a href="#0">
            <div class="slider--item-image">
            <img src="assets/img/work-victory.jpg" alt="Victory">
            </div>
            <p class="slider--item-title">${data[0].name}</p>
            <p class="slider--item-description">${data[0].artistName}</p>
            </a>
            </li>
            <li class="slider--item slider--item-center">
            <a href="#0">
            <div class="slider--item-image">
            <img src="assets/img/work-metiew-smith.jpg" alt="Metiew and Smith">
            </div>
            <p class="slider--item-title">${data[1].name}</p>
            <p class="slider--item-description">${data[1].artistName}</p>
            </a>
            </li>
            <li class="slider--item slider--item-right">
            <a href="#0">
            <div class="slider--item-image">
            <img src="assets/img/work-alex-nowak.jpg" alt="Alex Nowak">
            </div>
            <p class="slider--item-title">${data[2].name}</p>
            <p class="slider--item-description">${data[2].artistName}</p>
            </a>
            </li>`
        for (let i = 3; i < data.length; i++) {
          restOfSongs += ` <li class="slider--item">
             <a href="#0">
             <div class="slider--item-image">
             <img src="assets/img/work-alex-nowak.jpg" alt="Alex Nowak">
             </div>
             <p class="slider--item-title">${data[i].name}</p>
             <p class="slider--item-description">${data[i].artistName}</p>
             </a>
             </li>`
        }
        restOfSongs += `</ul>
        <div class="slider--prev">
          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118"
                        style="enable-background:new 0 0 150 118;" xml:space="preserve">
                        <g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)">
                          <path d="M561,1169C525,1155,10,640,3,612c-3-13,1-36,8-52c8-15,134-145,281-289C527,41,562,10,590,10c22,0,41,9,61,29
                      c55,55,49,64-163,278L296,510h575c564,0,576,0,597,20c46,43,37,109-18,137c-19,10-159,13-590,13l-565,1l182,180
                      c101,99,187,188,193,199c16,30,12,57-12,84C631,1174,595,1183,561,1169z" />
                        </g></svg></div>
                        <div class="slider--next"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 150 118"
                        style="enable-background:new 0 0 150 118;" xml:space="preserve">
                        <g transform="translate(0.000000,118.000000) scale(0.100000,-0.100000)">
                          <path d="M870,1167c-34-17-55-57-46-90c3-15,81-100,194-211l187-185l-565-1c-431,0-571-3-590-13c-55-28-64-94-18-137c21-20,33-20,597-20h575l-192-193C800,103,794,94,849,39c20-20,39-29,61-29c28,0,63,30,298,262c147,144,272,271,279,282c30,51,23,60-219,304C947,1180,926,1196,870,1167z" />
                        </g></svg></div></div>`
        $("#songs").append(restOfSongs);
        workSlider()
      }
    }
    function workSlider() {

      $('.slider--prev, .slider--next').click(function () {

        var $this = $(this),
          curLeft = $('.slider').find('.slider--item-left'),
          curLeftPos = $('.slider').children().index(curLeft),
          curCenter = $('.slider').find('.slider--item-center'),
          curCenterPos = $('.slider').children().index(curCenter),
          curRight = $('.slider').find('.slider--item-right'),
          curRightPos = $('.slider').children().index(curRight),
          totalWorks = $('.slider').children().length,
          $left = $('.slider--item-left'),
          $center = $('.slider--item-center'),
          $right = $('.slider--item-right'),
          $item = $('.slider--item');
        console.log("works:" + totalWorks)
        $('.slider').animate({ opacity: 0 }, 400);

        setTimeout(function () {

          if ($this.hasClass('slider--next')) {
            if (curLeftPos < totalWorks - 1 && curCenterPos < totalWorks - 1 && curRightPos < totalWorks - 1) {
              $left.removeClass('slider--item-left').next().addClass('slider--item-left');
              $center.removeClass('slider--item-center').next().addClass('slider--item-center');
              $right.removeClass('slider--item-right').next().addClass('slider--item-right');
            }
            else {
              if (curLeftPos === totalWorks - 1) {
                $item.removeClass('slider--item-left').first().addClass('slider--item-left');
                $center.removeClass('slider--item-center').next().addClass('slider--item-center');
                $right.removeClass('slider--item-right').next().addClass('slider--item-right');
              }
              else if (curCenterPos === totalWorks - 1) {
                $left.removeClass('slider--item-left').next().addClass('slider--item-left');
                $item.removeClass('slider--item-center').first().addClass('slider--item-center');
                $right.removeClass('slider--item-right').next().addClass('slider--item-right');
              }
              else {
                $left.removeClass('slider--item-left').next().addClass('slider--item-left');
                $center.removeClass('slider--item-center').next().addClass('slider--item-center');
                $item.removeClass('slider--item-right').first().addClass('slider--item-right');
              }
            }
          }
          else {
            if (curLeftPos !== 0 && curCenterPos !== 0 && curRightPos !== 0) {
              $left.removeClass('slider--item-left').prev().addClass('slider--item-left');
              $center.removeClass('slider--item-center').prev().addClass('slider--item-center');
              $right.removeClass('slider--item-right').prev().addClass('slider--item-right');
            }
            else {
              if (curLeftPos === 0) {
                $item.removeClass('slider--item-left').last().addClass('slider--item-left');
                $center.removeClass('slider--item-center').prev().addClass('slider--item-center');
                $right.removeClass('slider--item-right').prev().addClass('slider--item-right');
              }
              else if (curCenterPos === 0) {
                $left.removeClass('slider--item-left').prev().addClass('slider--item-left');
                $item.removeClass('slider--item-center').last().addClass('slider--item-center');
                $right.removeClass('slider--item-right').prev().addClass('slider--item-right');
              }
              else {
                $left.removeClass('slider--item-left').prev().addClass('slider--item-left');
                $center.removeClass('slider--item-center').prev().addClass('slider--item-center');
                $item.removeClass('slider--item-right').last().addClass('slider--item-right');
              }
            }
          }

        }, 400);

        $('.slider').animate({ opacity: 1 }, 400);

      });

    }

    function successCBRandom(data) {
      let songsCards = document.querySelectorAll(".randSongs");
      let ids = [];
      for (let i = 0; i < 3; i++) {
        songsCards[i].id = data[i].id;
        songsCards[i].querySelector(".randTitle").innerHTML = data[i].name;
        songsCards[i].querySelector(".randPara").innerHTML = data[i].artistName;
        ids.push(data[i].id);
      }
      let userId = JSON.parse(localStorage["user"]).id;
      if (localStorage.user !== undefined) {
        ajaxCall("GET", `${baseApi}/${userId}/songs`, "", function (responseData) {
          successCBFavRand(ids, responseData); // Pass the responseData to successCBFavRand
        }, errorCBFavorites);
      }
    }

    function successCBFavRand(ids, data) {
      const randomSongs = document.querySelectorAll(".randSongs");
      const matchingSongs = data.filter(song => ids.includes(song.id));
      console.log(matchingSongs);
      matchingSongs.forEach(matchingSong => {
        document.getElementById(matchingSong.id).querySelector("i.fa.fa-heart-o").style.color = "red";
      });
    }

    function errorCB(error) {
      let message = error.responseText;
      Swal.fire({
        icon: 'error',
        text: message,
        color: 'white',
        background: '#080808'
      })
    }
  </script>
  <!-- <script src="https://apis.google.com/js/api.js"></script>
<script>
  /**
   * Sample JavaScript code for youtube.search.list
   * See instructions for running APIs Explorer code samples locally:
   * https://developers.google.com/explorer-help/code-samples#javascript
   */

  function authenticate() {
    return gapi.auth2.getAuthInstance()
        .signIn({scope: "https://www.googleapis.com/auth/youtube.force-ssl"})
        .then(function() { console.log("Sign-in successful"); },
              function(err) { console.error("Error signing in", err); });
  }
  function loadClient() {
    gapi.client.setApiKey("AIzaSyA0myQXBGlJF9glTLy5OKyLna33CfgTvzA");
    return gapi.client.load("https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest")
        .then(function() { console.log("GAPI client loaded for API"); },
              function(err) { console.error("Error loading GAPI client for API", err); });
  }
  // Make sure the client is loaded and sign-in is complete before calling this method.
  function execute() {
    return gapi.client.youtube.search.list({
      "q": "dior"
    })
        .then(function(response) {
                // Handle the results here (response.result has the parsed body).
                console.log("Response", response);
              },
              function(err) { console.error("Execute error", err); });
  }
  gapi.load("client:auth2", function() {
    gapi.auth2.init({client_id: "YOUR_CLIENT_ID"});
  });
</script> -->


</body>

</html>